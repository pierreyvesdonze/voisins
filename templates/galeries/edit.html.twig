{% extends "base.html.twig" %}

{% block body %}
	<div class="card-header">
		<h1>Éditer la Galerie
			{{ galleryUserTitle }}</h1>
	</div>

	<hr class="hr">

	{% if app.request.attributes.get('_route') == 'gallery_update' %}
		<div class="card-gallery">
			<div class="container-gallery">

				{{ form_start(form) }}
				{{ form_widget(form) }}

				<hr class="hr">

				<div class="edit-photos-container">
					{% for photo in gallery.photos %}
						<div class="box">
								<span>
									<a href="{{ path('delete_photo', {'id': photo.id})}}" data-delete data-token="{{ csrf_token('delete' ~ photo.id )}}" class="button delete-photo">
										<span>&times;</span>
									</a>
								</span>
							<div class="image">
								<img src="{{ asset('uploads/images/' ~ galleryTitle ~ '/' ~ photo.title) }}" alt="" class="zoom-edit">
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		{% endif %}

		<hr class="hr">

		<div class="control">
			<button class="button">{{ button_label|default('Save') }}</button>
			{{ form_end(form) }}

			<a href="{{ path('gallery_index') }}">Retour à l'index</a>

			<form method="post" action="{{ path('gallery_delete', {'id': gallery.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
				<input type="hidden" name="_method" value="DELETE">
				<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ gallery.id) }}">
				<button class="btn">Delete</button>
			</form>
		</div>
	</div>
    
{% endblock %}
